var UtilityContainer={getProductsFromLocalStorage:function(){for(var t=[],e=0,i=localStorage.length;i>e;e++)if(0===localStorage.key(e).lastIndexOf("_product",0)){var a=JSON.parse(localStorage.getItem(localStorage.key(e))),n=a.product,o=a.quantity,r=a.price;t.push({id:n,quantity:o,price:r})}return t},getNumberOfProductsInWishlist:function(){for(var t=0,e=0,i=localStorage.length;i>e;e++)0===localStorage.key(e).lastIndexOf("_wish_product",0)&&(t+=JSON.parse(localStorage.getItem(localStorage.key(e))).quantity);return t},getNumberOfProducts:function(){for(var t=0,e=0,i=localStorage.length;i>e;e++)0===localStorage.key(e).lastIndexOf("_product",0)&&(t+=JSON.parse(localStorage.getItem(localStorage.key(e))).quantity);return t},getProductsPriceFromLocalStorage:function(){for(var t=0,e=UtilityContainer.getProductsFromLocalStorage(),i=0,a=e.length;a>i;i++)t+=e[i].price*e[i].quantity;return t},removeAllProductsFromLocalStorage:function(){for(var t=0,e=localStorage.length;e>t;t++)0===localStorage.key(t).lastIndexOf("_product",0)&&localStorage.removeItem(localStorage.key(t))},getShippingFromForm:function(){return res={country:$("#shippingCountry").val(),postcode:$("#shippingPostcode").val(),province:$("#shippingProvince").val(),line1:$("#shippingAddress1").val(),line2:$("#shippingAddress2").val(),name:$("#shippingFirstname").val()+" "+$("#shippingLastname").val(),city:$("#shippingCity").val(),phone:$("#shippingTel").val()}},buyButton_to_Json:function(t){return{product:t.data("product"),name:t.data("name"),price:t.data("price"),thumbnail:t.data("thumbnail"),thumbnail_lg:t.data("thumbnail_lg"),quantity:parseInt(t.data("quantity")),link:t.data("link"),description:t.data("description")?t.data("description"):""}},populateCountry:function(t){var e="/js/data/country-list."+t+".json",i="",a=$("#country");$.getJSON(e,function(t){$.each(t,function(t,e){i+="CA"==t?"<option value='"+t+"' selected>"+e+"</option>":"<option value='"+t+"'>"+e+"</option>"}),a.append(i)})},validateEmptyFields:function(t){for(var e=!0,i=0,a=t.length;a>i;i++)if(""==t[i].val()){e=!1;break}return e},validateEmail:function(t){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(t)},validatePostCode:function(t,e){return"CA"==e?t.match(/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} ?\d{1}[A-Z]{1}\d{1}$/i)?!0:!1:"US"==e?t.match(/^\d{5}(?:[-\s]\d{4})?$/)?!0:!1:!0},validateEmptyCart:function(){var t;return t=0===UtilityContainer.getProductsPriceFromLocalStorage()?!0:!1},addErrorClassToFields:function(t){for(var e=0,i=t.length;i>e;e++)""==t[e].val()&&(t[e].parent().addClass("has-error"),t[e].addClass("animated shake").bind("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated"),$(this).removeClass("shake"),$(this).unbind()}))},addErrorClassToFieldsWithRules:function(t){t.parent().addClass("has-error"),t.addClass("animated shake").bind("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated"),$(this).removeClass("shake"),$(this).unbind()})},addFadeOutUpClass:function(t){t.addClass("animated fadeOutUp").delay(1e3).queue(function(){$(this).addClass("hidden").clearQueue()})},removeErrorClassFromFields:function(t){for(var e=0,i=t.length;i>e;e++)""!=t[e].val()&&t[e].parent().hasClass("has-error")&&t[e].parent().removeClass("has-error")},getCheapestShippingMethod:function(t){for(var e=t.shipping.services,i=[],a=0,n=e.length;n>a;a++)i.push(e[a]);return i.sort(function(t,e){return t.price-e.price}),{fare:i[0].price,method:i[0].method}},getTaxes:function(t){var e=0,i=t.taxes.length;if(0!=i)for(var a=0;i>a;a++)e+=t.taxes[a].amount;return e.toFixed(2)},getShipmentTaxes:function(t,e){for(var i=0,a=0;a<e.shipping.services.length;a++)if(e.shipping.services[a].method==t&&0!=e.shipping.services[a].taxes.length)for(var n=0;n<e.shipping.services[a].taxes.length;n++)i+=e.shipping.services[a].taxes[n].amount;return i.toFixed(2)},getCartTaxes:function(t,e){var i=parseFloat(UtilityContainer.getTaxes(e)),a=parseFloat(UtilityContainer.getShipmentTaxes(t,e)),n=i+a;return n},getCartTotal:function(t,e){var i=parseFloat(UtilityContainer.getCartTaxes(t.method,e)),a=parseFloat(UtilityContainer.getCheapestShippingMethod(e).fare),n=parseFloat(UtilityContainer.getProductsPriceFromLocalStorage()),o=(i+a+n).toFixed(2);return o},urlGetParameters:function(){var t=document.location.search.substr(1);if(t.length<1)return{};var e,i,a,n,o=t.split("&"),r={};for(e in o)o[e].indexOf("=")<1||(i=o[e].split("="),a=decodeURIComponent(i[0]),n=decodeURIComponent(i[1]),r[a]=n,n.indexOf(";")>-1&&(r[a]=n.split(";")));return r},urlAddParameters:function(t,e){var i={};if("object"==typeof t)i=t;else{if("string"!=typeof t||"undefined"==typeof e)return console.log("Invalid query parameters.");i[t]=e}var a,n=this.urlGetParameters();for(a in i)n[a]=i[a];document.location.search=this.urlBuildQuery(n)},urlRemoveParameters:function(t){t="string"==typeof t?[t]:t;var e=this.urlGetParameters();t.forEach(function(t,i,a){"undefined"!=typeof e[t]&&delete e[t]}),document.location.search=this.urlBuildQuery(e)},urlBuildQuery:function(t){var e=[];for(var i in t)"undefined"!=typeof t[i]&&null!=t[i]&&("object"==typeof t[i]&&(t[i]=t[i].join(";")),e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i])));return"?"+(e.length>1?e.join("&"):e[0])}};$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),locale:$("html").attr("lang")}}),semanticInitContainer.init(),checkoutInitContainer.init(),cartDrawerInitContainer.init(),categoryContainer.init(),paymentOverlayContainer.init(),homepageContainer.init(),productLayoutFavoriteContainer.init(),productFormatContainer.init(),productResponsive.init(),wishlistLogicContainer.init(),$(".input-qty").TouchSpin({initval:1})});var paymentOverlayContainer={cancelOrder:function(){$("body").on("click","#cancelOrder",function(){Cookies.remove("_unpaid_orders"),$("#cancelledOrder .jumbotron").fadeOut(),window.location.replace("/"),UtilityContainer.removeAllProductsFromLocalStorage()})},checkPendingOrders:function(){if(Cookies.get("_unpaid_orders")){var t=JSON.parse(Cookies.get("_unpaid_orders"));$.ajax({type:"GET",url:ApiEndpoints.orders.view.replace(":id",t.id).replace(":verification",t.verification),success:function(t){"pending"==t.status?paymentOverlayContainer.showPaymentNotice():Cookies.remove("_unpaid_orders")}})}},showPaymentNotice:function(){var t=JSON.parse(Cookies.get("_unpaid_orders"));$("body").prepend('<div class="container overlay fullScreen" id="cancelledOrder"><div class="jumbotron vertical-align color-one"><div class="text-center"><h2>'+Localization.pending_order.replace(":command",t.id)+"</h2><h4>"+Localization.what_to_do+'</h4><br /><ul class="list-inline"><li><a href="'+ApiEndpoints.orders.pay.replace(":id",t.id).replace(":verification",t.verification)+'"><button class="btn btn-success" id="payOrder">'+Localization.pay_now+'</button></a></li><li><button class="btn btn-danger" id="cancelOrder">'+Localization.cancel_order+"</button></li></ul></div></div></div>")},init:function(){var t=paymentOverlayContainer;t.cancelOrder(),t.checkPendingOrders()}},billingContainer={autoFillBillingAddress:function(t,e){if($(".billing-checkbox").is(":checked")){$("#billing"+e[0].id.substring("shipping".length,e[0].id.length)).val(e[0].value);for(var i=0,a=t.length;a>i;i++)if(t[i][0].id.indexOf("shipping")>-1){var n=t[i][0].id.substring("shipping".length,t[i][0].id.length);$("#billing"+n).val(t[i][0].value)}}},setDifferentBillingAddress:function(t){$(".billing-checkbox").on("change",function(){$(".form-billing .chosen-container").width($("#customer_email").outerWidth()-20),this.checked?$(".form-billing").fadeOut(function(){$(this).addClass("hidden")}):($(".form-billing").hide().removeClass("hidden").fadeIn(),t.clearBillingAddress())})},clearBillingAddress:function(){""!=$(".form-billing input").val()&&""==$(".form-billing input").val()},init:function(){var t=billingContainer;t.setDifferentBillingAddress(t)}},checkoutInitContainer={estimateButtonClick:function(){$("#estimateButton").on("click",function(t){var e=$("#customer_email"),i=$("#customer_phone"),a=$("#shippingFirstname"),n=$("#shippingLastname"),o=$("#shippingAddress1"),r=$("#shippingCity"),s=$("#shippingCountry").val(),c=($("#shippingPostcode"),$("#billingFirstname")),l=$("#billingLastname"),d=$("#billingAddress1"),u=$("#billingCity"),p=$("#billingCountry").val(),m={country:s,postcode:$("#shippingPostcode").val(),postcodeInput:$("#shippingPostcode")},h=[a,n,o,r,c,l,d,u,e,i];t.preventDefault(),billingContainer.autoFillBillingAddress(h,m.postcodeInput);var g={country:p,postcode:$("#billingPostcode").val(),postcodeInput:$("#billingPostcode")};checkoutValidationContainer.init(h,e,m,g)})},init:function(){locationContainer.init(),billingContainer.init(),$("#shippingFirstname").focus();var t=checkoutInitContainer;t.estimateButtonClick()}},checkoutLogicContainer={createOrdersCookie:function(t){var e=t.id,i=t.verification;Cookies.set("_unpaid_orders",JSON.stringify({id:e,verification:i}))},placeOrderAjaxCall:function(t){$.ajax({method:"POST",url:ApiEndpoints.placeOrder,data:$("#cart_form").serialize(),cache:!1,success:function(e){console.log(e),t.createOrdersCookie(e),history.pushState({data:e},"Checkout ","/cart"),window.location.replace(e.payment_details.payment_url)},error:function(t,e){console.log(t),console.log(e)}})},hidePanels:function(t){$(".quantity, #shippingPostcode, #shippingCity").on("change",function(){UtilityContainer.addFadeOutUpClass($("#estimate")),UtilityContainer.addFadeOutUpClass($("#payment")),t.updateEstimateButtonValue()}),$(".close-button").on("click",function(){UtilityContainer.addFadeOutUpClass($("#estimate")),UtilityContainer.addFadeOutUpClass($("#payment")),t.updateEstimateButtonValue()})},updateEstimateButtonValue:function(){$("#estimateButton").removeClass("btn-one animated rubberBand").addClass("animated rubberBand btn-three").text(Localization.update)},init:function(){var t=checkoutLogicContainer;$("#checkoutButton").on("click",function(e){e.preventDefault(),$("#checkoutButton").html('<i class="fa fa-spinner fa-spin"></i>'),t.placeOrderAjaxCall(t)}),t.hidePanels(t)}},checkoutValidationContainer={removeErrorClassFromEmail:function(t){UtilityContainer.validateEmail(t.val())&&t.parent().hasClass("has-error")&&t.parent().removeClass("has-error")},removeErrorClassFromPostcode:function(t,e){UtilityContainer.validatePostCode(t.val(),e)&&t.parent().hasClass("has-error")&&t.parent().removeClass("has-error")},init:function(t,e,i,a){var n=checkoutValidationContainer;UtilityContainer.validateEmptyFields(t)&&UtilityContainer.validateEmail(e.val())&&UtilityContainer.validatePostCode(i.postcode,i.country)&&UtilityContainer.validatePostCode(a.postcode,a.country)?($("#estimateButton").html('<i class="fa fa-spinner fa-spin"></i>'),$("#estimate .table-striped").children().length>0&&$("#estimate .table-striped tbody").empty(),estimateContainer.ajaxCall()):(UtilityContainer.addErrorClassToFields(t),UtilityContainer.validatePostCode(i.postcode,i.country)||UtilityContainer.addErrorClassToFieldsWithRules(i.postcodeInput),UtilityContainer.validatePostCode(a.postcode,a.country)||UtilityContainer.addErrorClassToFieldsWithRules(a.postcodeInput),UtilityContainer.validateEmail(e.val())||(UtilityContainer.addErrorClassToFieldsWithRules(e),$("#why_email").removeClass("hidden").addClass("animated bounceInRight").tooltip())),UtilityContainer.removeErrorClassFromFields(t),n.removeErrorClassFromEmail(e),n.removeErrorClassFromPostcode(i.postcodeInput,i.country),n.removeErrorClassFromPostcode(a.postcodeInput,a.country)}},estimateContainer={ajaxCall:function(){$.ajax({type:"POST",url:ApiEndpoints.estimate,data:{email:$("#customer_email").val(),shipping:{},products:UtilityContainer.getProductsFromLocalStorage(),shipping_address:UtilityContainer.getShippingFromForm()},success:function(t){console.log(t),estimateContainer.init(t)},error:function(t,e){return 403==t.status?void window.location.replace("/auth/login"):void $("#estimate").html('<div class="alert alert-danger">Une erreur est survenue. Veuillez v√©rifier les informations fournies.</div>')}})},getShipmentTaxes:function(t,e){for(var i=0,a=0;a<e.shipping.services.length;a++)if(e.shipping.services[a].method==t&&0!=e.shipping.services[a].taxes.length)for(var n=0;n<e.shipping.services[a].taxes.length;n++)i+=e.shipping.services[a].taxes[n].amount;return i.toFixed(2)},displayEstimatePanel:function(){$("#estimate").removeClass("hidden fadeOutUp").addClass("animated fadeInDown")},scrollTopToEstimate:function(){$("html, body").animate({scrollTop:$("#estimate").offset().top},1e3)},fetchEstimate:function(t,e){$(".has-error").removeClass("has-error");for(var i=($("#customer_email").val(),$("#shippingPostcode").val(),$(".country").val(),0),a=t.shipping.services.length;a>i;i++){var n="<tr data-service='"+t.shipping.services[i].method+"'><td>"+t.shipping.services[i].name+"</td><td>"+t.shipping.services[i].transit+"</td><td>"+t.shipping.services[i].delivery+"</td><td>"+t.shipping.services[i].price+"</td><td><input type='radio' name='shipping' class='shipping_method' data-taxes='"+e.getShipmentTaxes(t.shipping.services[i].method,t)+"' data-cost='"+t.shipping.services[i].price+"' data-value='"+t.shipping.services[i].method+"' value='"+btoa(JSON.stringify(t.shipping.services[i]))+"' ></td>";$("#estimate .table-striped").append(n)}$("#estimateButton").removeClass("btn-three").addClass("btn-one").text(Localization["continue"]),e.selectDefaultShipmentMethod(),e.scrollTopToEstimate(),paymentContainer.init(t)},selectDefaultShipmentMethod:function(){for(var t=["DOM.EP","USA.TP","INT.TP"],e=$("input[name=shipping]"),i=0,a=e.length;a>i;i++)-1!=t.indexOf(e[i].dataset.value)&&(e[i].checked=!0)},init:function(t){var e=estimateContainer;0==UtilityContainer.getProductsFromLocalStorage().length?location.reload():(e.displayEstimatePanel(),e.fetchEstimate(t,e))}},locationContainer={populateCountry:function(t){var e="/js/data/country-list."+t+".json",i="",a=$(".country");$.getJSON(e,function(t){$.each(t,function(t,e){i+="CA"==t?"<option value='"+t+"' selected>"+e+"</option>":"<option value='"+t+"'>"+e+"</option>"}),a.append(i)}).done(function(){$(".country").chosen()})},populateProvincesAndStates:function(t,e){$.getJSON("/js/data/world-states.json",function(i){for(var a=0,n=t.length;n>a;a++){var o="",r=$(".province").find("[data-country='"+t[a]+"']");$.each(i,function(e){i[e].country===t[a]&&"QC"==i[e]["short"]?o+="<option value='"+i[e]["short"]+"' selected>"+i[e].name+"</option>":i[e].country===t[a]&&(o+="<option value='"+i[e]["short"]+"'>"+i[e].name+"</option>")}),r.append(o)}e()})},updateChosenSelects:function(t,e){"CA"==t||"US"==t||"MX"==t?$(e).removeAttr("disabled").trigger("chosen:updated"):$(e).attr("disabled","disabled"),$(e+" optgroup").attr("disabled","disabled"),("CA"==t||"US"==t||"MX"==t)&&$(e+' [data-country="'+t+'"]').removeAttr("disabled"),$(e).trigger("chosen:updated")},callUpdateChosenSelects:function(t){$("#billingCountry").on("change",function(){t.updateChosenSelects($(this).val(),"#billingProvince")}),$("#shippingCountry").on("change",function(){t.updateChosenSelects($(this).val(),"#shippingProvince")})},init:function(){var t=locationContainer;t.populateCountry($("html").attr("lang")),t.populateProvincesAndStates(["CA","US","MX"],function(){$(".province").chosen()}),t.callUpdateChosenSelects(t)}},paymentContainer={displayPaymentPanel:function(){$("#payment").removeClass("hidden fadeOutUp").addClass("animated fadeInDown"),$("#checkoutButton").addClass("animated rubberBand")},initPaymentPanel:function(t){var e=parseFloat(UtilityContainer.getProductsPriceFromLocalStorage()).toFixed(2),i=$("input:radio.shipping_method:checked").data("cost"),a=paymentContainer.getTaxes(t)+parseFloat($("input:radio.shipping_method:checked").data("taxes")),n=parseFloat(e)+parseFloat(i)+parseFloat(a);$("#price_subtotal").text(e),$("#price_transport").text(i),$("#price_taxes").text(a.toFixed(2)),$("#price_total").text(n.toFixed(2))},updatePaymentPanel:function(t){var e,i,a=parseFloat(UtilityContainer.getProductsPriceFromLocalStorage()).toFixed(2);$(".shipping_method").on("change",function(){e=$(this).data("cost"),i=paymentContainer.getTaxes(t)+parseFloat($(this).data("taxes")),total=parseFloat(a)+parseFloat(e)+parseFloat(i),$("#price_subtotal").text(a),$("#price_transport").text(e),$("#price_taxes").text(i.toFixed(2)),$("#price_total").text(total.toFixed(2))})},getTaxes:function(t){var e=0,i=t.taxes.length;if(0!=i)for(var a=0;i>a;a++)e+=t.taxes[a].amount;return e},init:function(t){paymentContainer.displayPaymentPanel(),paymentContainer.initPaymentPanel(t),paymentContainer.updatePaymentPanel(t),checkoutLogicContainer.init()}},semanticInitContainer={module:{initDropdownModule:function(){$(".ui.dropdown-select").dropdown(),$(".ui.dropdown-no-select").dropdown({action:"select"})},initRatingModule:function(){$(".ui.rating").rating()}},behaviors:{},init:function(){var t=semanticInitContainer,e=t.module;e.initDropdownModule(),e.initRatingModule()}},categoryContainer={searchParameters:{page:1,per_page:8,order:"relevance",min_price:null,max_price:null,brands:[],categories:[]},blurBackground:function(){$(".category-header").blurjs({source:".category-header"})},itemsPerPage:function(){$(".items-per-page .item").on("click",function(){categoryContainer.addDimmer(),UtilityContainer.urlAddParameters("per_page",$(this).data("sort"))}),$("#items-per-page-box").dropdown("set selected",this.searchParameters.per_page)},sortBy:function(){$(".sort-by .item").on("click",function(){categoryContainer.addDimmer(),UtilityContainer.urlAddParameters("order",$(this).data("sort"))}),$(".sort-by .item").each(function(t,e){return $(e).data("sort")==categoryContainer.searchParameters.order?($("#sort-by-box").dropdown("set selected",$(e).data("sort")),!1):void 0})},price:function(){$("#price-update").on("click",function(){categoryContainer.addDimmer(),UtilityContainer.urlAddParameters({min_price:$("#min-price").val(),max_price:$("#max-price").val()})}),this.searchParameters.min_price&&$("#min-price").val(this.searchParameters.min_price),this.searchParameters.max_price&&$("#max-price").val(this.searchParameters.max_price)},categories:function(){this.updateFilterList($("#refine-by-category"),"categories")},brands:function(){this.updateFilterList($("#refine-by-brand"),"brands")},updateFilterList:function(t,e){t.find(".item").on("change",{filter:e||"brands"},function(t){var e=$(this).data("filter"),i=(categoryContainer.searchParameters[t.data.filter],$(this));i.prop("checked")?categoryContainer.addFilter(t.data.filter,e):categoryContainer.removeFilter(t.data.filter,e)}),t.find(".item").each(function(){$(this).prop("checked",categoryContainer.searchParameters[e].indexOf(""+$(this).data("filter"))>-1),$(this).prop("checked")&&categoryContainer.addTag($(this))})},addTag:function(t){var e='<div class="item"><a class="ui grey tag label">'+t.data("name")+'<i class="icon remove right floated" data-id="'+t.data("filter")+'" data-type="'+t.data("type")+'"></i></a></div>';$(".tags-list").append(e)},tags:function(){$(".tags-list .item .remove").on("click",function(){categoryContainer.removeFilter($(this).data("type"),$(this).data("id"))})},addFilter:function(t,e){this.searchParameters[t].push(e),this.updateFilters(t)},removeFilter:function(t,e){var i=this.searchParameters[t],a=[];if(i.length>1)for(var n in i)i[n]!=e&&a.push(i[n]);this.searchParameters[t]=a,this.updateFilters(t)},updateFilters:function(t){var e=this.searchParameters[t];if(e.sort(function(t,e){return t-e}),e.length>0){var i=e.length>1?e.join(";"):e[0];categoryContainer.addDimmer(),UtilityContainer.urlAddParameters(t,i)}else UtilityContainer.urlRemoveParameters(t)},toggleLayout:function(){var t=categoryContainer,e=$(".layout-toggle-container"),i=$(".dense-product"),a=$(".product-image"),n=$(".dense-product .buybutton"),o=$(".dense-product .short-description"),r=$(".dense-product .name a");$("#category-layout-switcher").on("click",function(){e.hasClass("grid-layout")?(e.removeClass("grid-layout").addClass("list-layout"),i.removeClass("four wide column text-center no-border").addClass("sixteen wide column border-bottom-clear"),o.removeClass("hidden"),r.addClass("ui medium header"),a.removeClass("center-block").addClass("pull-left").css("margin-right","5%"),n.css("margin-top","2rem"),t.localizeSwitcher($(this),"grid")):e.hasClass("list-layout")&&(e.removeClass("list-layout").addClass("grid-layout"),i.removeClass("sixteen wide column border-bottom-clear").addClass("four wide column text-center no-border"),a.addClass("center-block").removeClass("pull-left").css("margin-right","0"),o.addClass("hidden"),r.removeClass("medium").addClass("tiny"),n.css("margin-top","0"),t.localizeSwitcher($(this),"list"))})},localizeSwitcher:function(t,e){"list"===e?t.html("<i class='list layout icon'></i>"+Localization.list):t.html("<i class='grid layout icon'></i>"+Localization.grid)},retrieveSearchParameters:function(){var t=UtilityContainer.urlGetParameters();for(var e in t)this.searchParameters[e]=t[e],["brands","categories"].indexOf(e)>-1&&"object"!=typeof t[e]&&(this.searchParameters[e]=[t[e]])},toggleTagsList:function(){$(".tags-list").children().size()>0?$(".tags-list").parent().removeClass("hidden"):""},localizeDimmer:function(){$(".loading-text").text(Localization.loading+"...")},addDimmer:function(){var t='<div class="ui page dimmer loading-dimmer"><div class="content"><div class="center"><h1 class="ui header loading-text"></h1></div></div></div>';$("body").append(t),categoryContainer.localizeDimmer(),$(".ui.dimmer.loading-dimmer").dimmer("show")},init:function(){var t=categoryContainer;t.retrieveSearchParameters(),t.blurBackground(),t.itemsPerPage(),t.sortBy(),t.price(),t.categories(),t.brands(),t.tags(),t.toggleLayout(),t.toggleTagsList()}},homepageContainer={mixed:{toggleSixteenWideColumn:function(){var t=$(".mixed-section .eleven"),e=$(".mixed-section .four");$(window).on("load resize",function(){e.is(":visible")?t.removeClass().addClass("eleven wide column"):t.removeClass().addClass("sixteen wide column")})}},init:function(){var t=homepageContainer,e=t.mixed;e.toggleSixteenWideColumn()}},productFormatContainer={displaySyncedProductInformation:function(){const t=productFormatContainer,e=$(".format-selection");e.on("click",function(){$("#product-format").text($(this).data("format")),t.setPriceTag($(this).data("price")),t.setInventoryCount($(this).data("inventory-count")),t.toggleActiveClass($(this)),t.setBuybuttonInformation($(this))})},setInventoryCount:function(t){const e=$("#inventory-count"),i=e.data("country-code"),a=Localization.express_shipping,n=Localization.stock_left.replace(":quantity",t),o=Localization.shipping_time,r="US"===i||"CA"===i?"fa-truck":"fa-plane";var s="";s=t>5?'<link itemprop="availability" href="http://schema.org/InStock"><li class="text-success"><i class="fa '+r+' fa-fw"></i> '+a:t>0?'<link itemprop="availability" href="http://schema.org/LimitedAvailability" ><li class="text-warning"><i class="fa '+r+' fa-fw"></i> '+n:'<link itemprop="availability" href="http://schema.org/LimitedAvailability" ><li class="text-warning"><i class="fa '+r+' fa-fw"></i> '+o,e.html(s)},setPriceTag:function(t){$(".price-tag").text("$ "+t)},setBuybuttonInformation:function(t){var e=$(".buybutton-format-selection-wrapper"),i='<button class="btn btn-three buybutton horizontal-align"data-product="'+t.data("product")+'"data-price="'+t.data("price")+'"data-thumbnail="'+t.data("thumbnail")+'"data-thumbnail_lg="'+t.data("thumbnail_lg")+'"data-name="'+t.data("name")+'"data-format="'+t.data("format")+'"data-inventory-count="'+t.data("inventory-count")+'"data-quantity="'+t.data("quantity")+'"data-link="'+t.data("link")+'"><div class="add-cart"><i class="fa fa-check-circle"></i> '+Localization.add_cart+"</div> </button>";e.empty(),e.append(i)},toggleActiveClass:function(t){$(".format-selection.active").removeClass("active"),t.addClass("active")},init:function(){const t=productFormatContainer;t.displaySyncedProductInformation()}},productLayoutFavoriteContainer={fadeInFavoriteIcon:function(){$(".dense-product").hover(function(){$(this).children(".favorite-wrapper").fadeIn()},function(){$(this).children(".favorite-wrapper").hide()})},setWishlistBadgeQuantity:function(){var t=UtilityContainer.getNumberOfProductsInWishlist();$(".wishlist_badge").text(t)},addToFavorite:function(){var t,e=productLayoutFavoriteContainer;$(".favorite-wrapper").on("click",function(){$(this).hasClass("favorited")?e.removeFromFavorite($(this),e):(t=UtilityContainer.buyButton_to_Json($(this).parent().find(".buybutton")),localStorage.setItem("_wish_product "+t.product,JSON.stringify(t)),$(this).addClass("favorited"),e.setWishlistBadgeQuantity())})},persistFavorite:function(){for(var t=0,e=localStorage.length;e>t;t++)if(0===localStorage.key(t).lastIndexOf("_wish_product",0))for(var i=0;i<$(".favorite-wrapper").length;i++)JSON.parse(localStorage.getItem(localStorage.key(t))).product===$(".favorite-wrapper")[i].dataset.product&&($(".favorite-wrapper")[i].className+=" favorited")},removeFromFavorite:function(t,e){t.removeClass("favorited"),localStorage.removeItem("_wish_product "+t.data("product")),e.setWishlistBadgeQuantity()},init:function(){var t=productLayoutFavoriteContainer;t.addToFavorite(),t.persistFavorite(),t.fadeInFavoriteIcon(),t.setWishlistBadgeQuantity()}},productResponsive={invertPriceAndDescriptionColumn:function(){$(window).on("load resize",function(){$(this).width()<768?$("#product-description").before($("#product-info-box")):$("#product-description").after($("#product-info-box"))})},init:function(){var t=productResponsive;t.invertPriceAndDescriptionColumn()}},cartDrawerInitContainer={buyButtonClick:function(){$("body").on("click",".buybutton",function(){$(".view-cart").is(":visible")?cartDisplayContainer.animateIn():cartDisplayContainer.fadeInDimmer(),cartLogicContainer.addItem(UtilityContainer.buyButton_to_Json($(this))),cartLogicContainer.storeItem(UtilityContainer.buyButton_to_Json($(this))),$("#cart-items .empty-cart").addClass("hidden")})},getEstimateClick:function(){$(".getEstimate").on("click",function(){UtilityContainer.validatePostCode($("#postcode").val(),$(".price-estimate #country").val())&&UtilityContainer.validateEmptyFields([$("#postcode")])&&!UtilityContainer.validateEmptyCart()?($(this).html('<i class="fa fa-spinner fa-spin"></i>'),cartLogicContainer.ajaxCall()):UtilityContainer.validateEmptyCart()?$("#cart-items .empty-cart").removeClass("hidden"):UtilityContainer.addErrorClassToFieldsWithRules($("#postcode"))})},init:function(){cartDisplayContainer.init(),cartLogicContainer.init(),cartDisplayContainer.setCartItemsHeight();var t=cartDrawerInitContainer;t.buyButtonClick(),t.getEstimateClick()}},cartLogicContainer={$el:{$list:$(".cart-items-list")},addItem:function(t){var e=(parseInt(t.quantity)*parseFloat(t.price)).toFixed(2),i='<div class="item horizontally-padded animated bounceInDown" data-product="'+t.product+'"data-quantity=1><div class="ui tiny images"><img src="'+t.thumbnail_lg+'"/></div><div class="middle aligned content" style="padding-left: 1.7531%"><h4 class="ui header">'+t.name+'</h4><div class="meta"><span class="price" data-price="'+t.price+'">$'+e+'</span><i class="trash icon pull-right close-button"></i></div><div class="content cart-content"><div class="ui input"><input type="number" class="quantity" min="1" step="1" value="'+t.quantity+'" name="products['+t.product+'][quantity]"><input type="hidden" name="products['+t.product+'][id]" value="'+t.product+'"/> </div></div></div></div>';$(".cart-items-list [data-product='"+t.product+"']").length||$(".cart-items-list").append(i)},storeItem:function(t){localStorage.setItem("_product "+t.product,JSON.stringify(t)),cartLogicContainer.setBadgeQuantity(),cartLogicContainer.setQuantityCookie(),cartLogicContainer.setCartSubtotal(),cartLogicContainer.setCartTotal(),cartLogicContainer.updateAjaxCall()},loadItem:function(){for(var t=0,e=localStorage.length;e>t;t++)0===localStorage.key(t).lastIndexOf("_product",0)&&cartLogicContainer.addItem(JSON.parse(localStorage.getItem(localStorage.key(t))))},deleteItem:function(){$(document).on("click",".close-button",function(){var t=$(this).closest(".animated").addClass("animated bounceOutLeft");t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).remove()}),localStorage.removeItem("_product "+$(this).closest(".animated").data("product")),cartLogicContainer.setBadgeQuantity(),cartLogicContainer.setQuantityCookie(),cartLogicContainer.setCartSubtotal(),cartLogicContainer.setCartTotal(),cartLogicContainer.updateAjaxCall()})},modifyQuantity:function(){$(".cart-items-list").on("change",".quantity",function(){var t=$(this).closest(".item"),e=t.find(".price");e.text("$"+(e.data("price")*$(this).val()).toFixed(2));var i=JSON.parse(localStorage.getItem("_product "+t.data("product")));i.quantity=parseInt($(this).val()),localStorage.setItem("_product "+t.data("product"),JSON.stringify(i)),cartLogicContainer.setBadgeQuantity(),cartLogicContainer.setQuantityCookie(),cartLogicContainer.setCartSubtotal(),cartLogicContainer.setCartTotal(),cartLogicContainer.updateAjaxCall()})},modifyQuantityBeforeBuying:function(){$("#item_quantity").on("change",function(){var t=$(this).closest(".input-qty-detail").find(".buybutton"),e=$(this).closest(".input-qty-detail").find(".format-selection"),i=$(this);e.each(function(){this.dataset.quantity=parseInt(i.val())}),t.data("quantity",parseInt(i.val()))})},setBadgeQuantity:function(){var t=UtilityContainer.getNumberOfProducts();$(".cart_badge").text(t)},setQuantityCookie:function(){var t=UtilityContainer.getNumberOfProducts();void 0==Cookies.get("quantityCart")||0===t?Cookies.set("quantityCart",btoa("0")):Cookies.set("quantityCart",btoa(t))},setCartSubtotal:function(){$("dd#subtotal").text("$"+UtilityContainer.getProductsPriceFromLocalStorage().toFixed(2))},setCartShipping:function(t){$("dd#shipping").text("$"+UtilityContainer.getCheapestShippingMethod(t).fare)},setCartTaxes:function(t){$("#taxes").text("$"+t.toFixed(2))},setCartTotal:function(t){$(".cart-total dl").show(),$(".calculation.total dd").text("$ "+t)},ajaxCall:function(){$.ajax({type:"POST",url:"/api/estimate",data:{products:UtilityContainer.getProductsFromLocalStorage(),shipping_address:{postcode:$("#postcode").val(),country:$(".price-estimate #country").val(),province:"QC"}},success:function(t){cartLogicContainer.setCartShipping(t),cartLogicContainer.setCartTaxes(UtilityContainer.getCartTaxes(UtilityContainer.getCheapestShippingMethod(t).method,t)),cartLogicContainer.setCartTotal(UtilityContainer.getCartTotal(UtilityContainer.getCheapestShippingMethod(t),t))},error:function(t){console.log(t)},complete:function(){$(".price-estimate").fadeOut(300,function(){$(".calculation.hidden").fadeIn().removeClass("hidden"),$(".cart-total.hidden").fadeIn().removeClass("hidden")})}})},updateAjaxCall:function(){$(".total").parent().hasClass("hidden")||($(".cart-total dl").hide(),$(".price-estimate-update").fadeIn("fast")),$(".changeLocation").click(function(){$("dl.calculation").addClass("hidden"),$(".getEstimate").html(Localization.update),$(".price-estimate-update").fadeOut(),$(".price-estimate").fadeIn()}),$(".price-estimate-update .getEstimate").click(function(){UtilityContainer.validateEmptyCart()||setTimeout(function(){$(".price-estimate-update .getEstimate").parent().fadeOut(300),$(".price-estimate-update .getEstimate").html(Localization.update)},2250)})},init:function(){cartLogicContainer.setBadgeQuantity(),cartLogicContainer.loadItem(),cartLogicContainer.deleteItem(),cartLogicContainer.modifyQuantity(),cartLogicContainer.modifyQuantityBeforeBuying(),cartLogicContainer.setQuantityCookie(),cartLogicContainer.setCartSubtotal()}},cartDisplayContainer={$el:{$back:$("#back"),$proceed:$("#proceed"),$trigger:$(".view-cart"),
$container:$("#cart-container"),$checkout:$("#checkout"),$body:$("body")},displayOn:function(){var t=cartDisplayContainer.$el.$container.width();cartDisplayContainer.$el.$container.css({"margin-right":-t}),cartDisplayContainer.$el.$trigger.click(function(){cartDisplayContainer.animateIn()})},displayOff:function(){cartDisplayContainer.$el.$back.click(function(){cartDisplayContainer.animateOut()}),cartDisplayContainer.$el.$checkout.click(function(){sessionStorage.isDisplayed=!1})},animateIn:function(){cartDisplayContainer.$el.$container.show(),cartDisplayContainer.$el.$container.animate({"margin-right":0},400),sessionStorage.isDisplayed=!0},animateOut:function(){var t=cartDisplayContainer.$el.$container.width();cartDisplayContainer.$el.$container.animate({"margin-right":-t},400,function(){$(this).hide()}),sessionStorage.isDisplayed=!1},setCartItemsHeight:function(){cartDisplayContainer.computeCartItemsHeight(),$(window).on("resize",function(){cartDisplayContainer.computeCartItemsHeight()}),cartDisplayContainer.$el.$trigger.on("click",function(){cartDisplayContainer.computeCartItemsHeight()})},computeCartItemsHeight:function(){var t=$("#cart-container").height()-($(".cart-header").height()+$(".cart-footer").height());$("#cart-items").css("height",t)},fadeInDimmer:function(){$(".ui.dimmer").dimmer("show")},init:function(){cartDisplayContainer.displayOn(),cartDisplayContainer.displayOff(),UtilityContainer.populateCountry($("html").attr("lang")),"true"==sessionStorage.isDisplayed&&(cartDisplayContainer.$el.$container.css("margin-right",0),cartDisplayContainer.$el.$container.show())}},wishlistLogicContainer={createWishlistElement:function(t){var e=wishlistLogicContainer,i='<div class="item list-layout-element"><div class="ui tiny image"><img src='+t.thumbnail_lg+'></div><div class="middle aligned content"><div class="header"><a href='+t.link+">"+t.name+'</a></div><div class="description"><p>'+t.description+"</p><h5> $ "+parseFloat(Math.round(100*t.price)/100).toFixed(2)+'</h5></div><div class="extra"><button class="ui right floated button green buybutton"data-product="'+t.product+'"data-price="'+t.price+'"data-thumbnail="'+t.thumbnail+'"data-thumbnail_lg="'+t.thumbnail_lg+'"data-name="'+t.name+'"data-description="'+t.description+'"data-quantity="'+t.quantity+'">Add to cart </button></button><button class="ui right floated button inverted red removeFavoriteButton" data-product="'+t.product+'">Remove from wishlist</button></div></div></div><hr/>';e.localizeWishlistButton(),$(".list-layout-element-container").append(i)},renderWishlist:function(){for(var t=wishlistLogicContainer,e=0,i=localStorage.length;i>e;e++)0===localStorage.key(e).lastIndexOf("_wish_product",0)&&t.createWishlistElement(JSON.parse(localStorage.getItem(localStorage.key(e))))},localizeWishlistButton:function(){$(".list-layout-element .buybutton").text(Localization.add_cart),$(".list-layout-element .removeFavoriteButton").text(Localization.wishlist_remove)},removeWishlistElement:function(){$(".list-layout-element-container").on("click",".removeFavoriteButton",function(){UtilityContainer.addFadeOutUpClass($(this).closest(".list-layout-element")),UtilityContainer.addFadeOutUpClass($(this).closest(".list-layout-element").next()),localStorage.removeItem("_wish_product "+$(this).data("product")),wishlistContainer.setNumberOfProductsInHeader(),productLayoutFavoriteContainer.setWishlistBadgeQuantity()})},init:function(){var t=wishlistLogicContainer;wishlistContainer.init(),t.renderWishlist(),t.removeWishlistElement()}},wishlistContainer={setNumberOfProductsInHeader:function(){var t="";t+=0==UtilityContainer.getNumberOfProductsInWishlist()||1==UtilityContainer.getNumberOfProductsInWishlist()?UtilityContainer.getNumberOfProductsInWishlist()+"  item ":UtilityContainer.getNumberOfProductsInWishlist()+"  items ",$("#quantity-wishlist").text(t)},init:function(){var t=wishlistContainer;t.setNumberOfProductsInHeader()}};